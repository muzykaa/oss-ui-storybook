<template>
  <div>
    <div v-for="(item, index) in items" :key="index">
      <div style="display: flex; align-items: center; margin: 5px 0; cursor: pointer" @click="handleItemClick(index)">
        <input type="radio" :value="index" v-model="selectedItem" style="margin-right: 10px" />
        <Icon name="angle-right" style="margin-right: 10px" />
        <span>{{ item.text }}</span>
      </div>
      <div v-if="selectedItem === index && item.children.length > 0" style="margin-left: 20px">
        <div v-for="(childItem, childIndex) in item.children" :key="childIndex">
          <div style="display: flex; align-items: center; margin: 5px 0">
            <input
              type="radio"
              :value="`${index}-${childIndex}`"
              v-model="selectedChildItem"
              style="margin-right: 10px"
            />
            <Icon name="angle-right" style="margin-right: 10px" />
            <span>{{ childItem.text }}</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<script lang="ts" setup>
import Icon from '@/components/viewers/Icon';
import { ref } from 'vue';

interface Props {
  type: unknown;
  items: {
    text: string;
    children: { text: string }[];
  }[];
}

defineProps<Props>();

const selectedItem = ref<number | null>(null);
const selectedChildItem = ref<number | null>(null);

const handleItemClick = (index: number) => {
  if (selectedItem.value === index) {
    selectedItem.value = null;
  } else {
    selectedItem.value = index;
    selectedChildItem.value = null;
  }
};
</script>
