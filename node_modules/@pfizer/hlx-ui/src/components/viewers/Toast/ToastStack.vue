<template>
  <div v-if="modelValue.length" :class="['toast-stack', position]">
    <ToastItem v-for="toast in modelValue" :key="toast.title" v-bind="toast" @close="itemCloseHandler">
      <template #content>{{ toast.title }}</template>
    </ToastItem>
  </div>
</template>

<script setup lang="ts">
import type { Toast } from './type/toast';
import ToastItem from './Toast.vue';

interface Props {
  position: 'left' | 'center' | 'right';
  modelValue: Toast[];
}

const props = withDefaults(defineProps<Props>(), {
  position: 'right',
});
const emit = defineEmits(['update:modelValue']);

const itemCloseHandler = (item: Toast) => {
  emit(
    'update:modelValue',
    props.modelValue.filter((toastItem: Toast) => {
      return toastItem.id !== item.id;
    })
  );
};
</script>

<style lang="scss">
@import './Toast';
</style>
