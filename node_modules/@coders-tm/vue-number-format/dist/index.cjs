/**
 * Vue Number Format 3.34.1
 * (c) 2021-2023 Dipak Sarkar <hello@dipaksarkar.in> (https://dipaksarkar.in/)
 * @license MIT
 */
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("vue"),t={prefix:"",suffix:"",separator:",",decimal:".",precision:2,minimumFractionDigits:null,prefill:!0,reverseFill:!1,min:null,max:null,nullValue:""};function n(e){return t=0,n=e,i=20,Math.max(t,Math.min(n,i));var t,n,i}class i{options;input;number;isClean;preSurRegExp;numberRegExp;cleanRegExp;negativeRegExp;constructor(e){this.options=Object.assign(l(t),e);const{prefix:n,suffix:i,decimal:r,reverseFill:u}=this.options;this.input="",this.number="",this.isClean=!u;const a=n.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),s=i.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&");this.preSurRegExp=new RegExp(`${a}|${s}`,"g"),this.numberRegExp=new RegExp(`[^0-9\\${r}]+`,"gi"),this.cleanRegExp=new RegExp("[^0-9]+","gi"),this.negativeRegExp=new RegExp("[^0-9\\-]+","gi")}isNull(){return!this.numberOnly(this.isClean?this.cleanRegExp:this.negativeRegExp)}clean(e=!1){return this.isClean=e,this}sign(){if(null===this.input||void 0===this.input)return"";const e=this.input.toString().indexOf("-")>=0;return this.isClean?e&&this.realNumber()>0?"-":"":e?"-":""}toFixed(){const e=Math.pow(10,this.options.precision);return(parseFloat(this.numberOnly(/\D+/g))/e||0).toFixed(n(this.options.precision))}toNumber(e){return Number(e)}numberOnly(e){return this.input?.toString().replace(this.preSurRegExp,"").replace(e||this.numberRegExp,"")}isNegative(){return"-"===this.sign()}numbers(){const{reverseFill:e,decimal:t}=this.options;return e?this.number=this.toFixed().replace(".",t):"number"==typeof this.input?this.number=this.parts(this.input.toString().replace("-",""),".").join(t):isNaN(this.toNumber(this.input))?this.number=this.parts(this.numberOnly()).join(t):this.number=this.parts(this.input.replace("-",""),".").join(t),this.number}unformatNumber(){return this.numbers().toString().replace(this.options.decimal,".")}realNumber(){return parseFloat(this.unformatNumber())}parts(e,t){const{precision:n,minimumFractionDigits:i,decimal:r}=this.options;let l=e.toString().split(t||r);if(l.length>1&&(l[0]=this.toNumber(l[0])||0,l[1]=l.slice(1,l.length).join(""),l=l.slice(0,2)),this.isClean){const e=this.toNumber(l.join(".")).toFixed(n),t=this.toNumber(e),r=t.toFixed(i);l=i>=0&&t.toString().length<r.length?r.toString().split("."):t.toString().split(".")}return l.slice(0,2)}addSeparator(){const{decimal:e,separator:t}=this.options,n=this.numbers().split(e);return n[0]=n[0].toString().replace(/(\d)(?=(?:\d{3})+\b)/gm,`$1${t}`),n.join(e)}format(e){this.input=e;const{reverseFill:t,nullValue:n,prefix:i,suffix:r}=this.options;return this.isNull()&&!t?n:this.sign()+i+this.addSeparator()+r}unformat(e){this.input=e;const{reverseFill:t,nullValue:n}=this.options,i=this.realNumber(),r=this.unformatNumber();return this.isNull()||t&&0===i?n:this.sign()+r}}const r="-";function l(e){return JSON.parse(JSON.stringify(e))}function u(e){return new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:{facade:!0}})}function a(e){const t=e instanceof HTMLInputElement?e:e.querySelector("input");if(!t)throw new Error("number directive requires an input element");return t}function s(e,t){const n=()=>{e.setSelectionRange(t,t)};n(),setTimeout(n,1)}function o(e,t,{emit:n=!0,force:r=!1,clean:l=!1}={}){const{options:a,oldValue:s}=e,{reverseFill:o,max:p,min:m}=a,c=t?.props?.value||e.value;if(r||s!==c){const t=new i(a).clean(l&&!o);let r=t.format(c),s=t.clean(!o).unformat(c);return l&&(Number(p)===p&&Number(s)>p?(r=t.format(p),s=p.toString()):Number(m)===m&&Number(s)<m&&(r=t.format(m),s=m.toString())),e.oldValue=r,e.unmasked=s,e.value!==r&&(e.value=r),n&&e.dispatchEvent(u("input"))}}var p={beforeMount:(e,{value:n,modifiers:r},u)=>{e=a(e);const s=Object.assign(l(t),n,r),{reverseFill:p,precision:m,decimal:c}=s;e.options=s,e.setAttribute("inputmode","numeric"),p&&e.value?(e.value=parseFloat(new i({...s,reverseFill:!1}).unformat(e.value)).toFixed(m),u?.props?.value&&(u.props.value=e.value)):e.value&&!isNaN(Number(e.value))&&(e.value=e.value.replace(".",c)),o(e,u,{force:s.prefill,clean:!0,emit:!1})},mounted:e=>{const t=(e=a(e)).parentElement||e,n=t=>{t.target===e&&function(e){const{target:t,detail:n}=e;if(n?.facade)return!1;e.stopPropagation();let i=t.value.length;const{oldValue:r,options:l}=t;t.selectionEnd&&(i=t.value.length-t.selectionEnd),o(t,null,{clean:!l.precision,emit:!1}),l.suffix&&(i=Math.max(i,l.suffix.length)),i=t.value.length-i,l.prefix&&(i=Math.max(i,l.prefix.length)),s(t,i),r!==t.value&&t.dispatchEvent(u("input"))}(t)},i=t=>{t.target===e&&function(e){const{target:t}=e,{oldValue:n}=t;o(t,null,{force:!0,clean:!0,emit:!1}),n!==t.value&&t.dispatchEvent(u("input"))}(t)},l=t=>{t.target===e&&function(e,t){const{options:n}=t,{prefix:i,suffix:l,decimal:u,min:a,separator:o}=n,{key:p}=e,m=new RegExp(`${i}|${l}`,"g"),c=t.value.replace(m,""),d=void 0===a||Number(a)<0||Number(a)!==a;if(p===u)c.includes(u)?e.preventDefault():c||(t.value="0"+u,t.dispatchEvent(new Event("input")));else if(p!==r||d){if("Backspace"===p){const n=t.selectionEnd||0,u=t.value.slice(n-1,n),a=t.value.slice(n-2,n);let p=t.value.length-n;[i,r,o].includes(u)&&(e.preventDefault(),t.value=u===o?t.value.replace(a,""):t.value.replace(new RegExp(`[${i}${r}]`,"g"),""),p=Math.max(p,l.length),p=t.value.length-p,p=Math.max(p,i.length),s(t,p),t.dispatchEvent(new Event("input")))}}else e.preventDefault()}(t,e)};t.addEventListener("input",n,!0),t.addEventListener("blur",i,!0),t.addEventListener("keydown",l,!0),e.cleanup=()=>{t.removeEventListener("input",n,!0),t.removeEventListener("blur",i,!0),t.removeEventListener("keydown",l,!0)}},updated:(e,{value:t,oldValue:n,modifiers:i},r)=>{if(e=a(e),t!==n){const n=e.options;e.options=Object.assign(n,t,i),o(e,r,{force:!0,clean:!1,emit:!1})}else o(e,r,{emit:!1})},unmounted:e=>{a(e).cleanup()}};const m=l(t);var c=e.defineComponent({name:"VueNumber",directives:{number:p},props:{modelValue:{type:[String,Number],required:!0},nullValue:{type:[Number,String],default:m.nullValue},masked:Boolean,readonly:Boolean,disabled:Boolean,reverseFill:{type:Boolean,default:m.reverseFill},prefill:{type:Boolean,default:m.prefill},precision:{type:Number,default:()=>m.precision},minimumFractionDigits:{type:Number,default:()=>m.minimumFractionDigits},decimal:{type:String,default:()=>m.decimal},min:{type:Number,default:()=>m.min},max:{type:Number,default:()=>m.max},separator:{type:String,default:()=>m.separator},prefix:{type:String,default:()=>m.prefix},suffix:{type:String,default:()=>m.suffix}},emits:["update:model-value","input:model-value"],setup(t,{emit:n}){const r=e.ref(t.modelValue),l=e.ref(!1),u=e.ref(""),a=e.computed((()=>({...t}))),s=new i(a.value),o=e.computed((()=>t.masked?s.format(r.value):u.value)),p=()=>{n("update:model-value",o.value)};return e.watch((()=>t.modelValue),(e=>{const t=s.format(e);t!==r.value&&(r.value=t)})),{config:a,maskedValue:r,unmaskedValue:u,input:e=>{const{target:t}=e;r.value=t.value,u.value=t.unmasked,l.value=!0,n("input:model-value",o.value)},blur:()=>{l.value&&o.value!==t.modelValue&&p()},change:p}}});const d=["value","readonly","disabled"];c.render=function(t,n,i,r,l,u){const a=e.resolveDirective("number");return e.withDirectives((e.openBlock(),e.createElementBlock("input",{type:"text",autocomplete:"off",value:t.maskedValue,readonly:t.readonly,disabled:t.disabled,class:"v-number vue-number-format",onChange:n[0]||(n[0]=(...e)=>t.change&&t.change(...e)),onInput:n[1]||(n[1]=(...e)=>t.input&&t.input(...e)),onBlur:n[2]||(n[2]=(...e)=>t.blur&&t.blur(...e))},null,40,d)),[[a,t.config]])},c.__file="src/component.vue";const v={install(e,n){n&&Object.assign(t,n),e.directive("number",p),e.component("VueNumber",c)}};exports.NumberFormat=i,exports.component=c,exports.default=v,exports.directive=p,exports.options=t;
